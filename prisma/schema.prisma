generator client {
  provider = "prisma-client-js"
  binaryTargets = ["native"]
}

datasource db {
  provider = "postgresql" // ou "mysql" selon ton SGBD
  url      = env("DATABASE_URL")
}

model Crew {
  id    BigInt  @id @default(autoincrement())
  name  String
  vaisseau String

  users User[]
}

model Session {
  id        String   @id
  userId    BigInt
  expiresAt DateTime

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model User {
  id        BigInt   @id @default(autoincrement())
  username  String
  email     String   @unique
  password  String
  photo     String
  linkedin  String
  points    BigInt
  rank      String
  crewId    BigInt?

  crew      Crew?   @relation(fields: [crewId], references: [id])
  badges    UserBadge[]
  sessions  Session[]
}

model Badge {
  id          BigInt   @id @default(autoincrement())
  logo        String
  name        String
  description String
  tier        String

  games  Game[]
  users       UserBadge[]
}

model UserBadge {
  user_id  BigInt
  badge_id BigInt

  user  User  @relation(fields: [user_id], references: [id])
  badge Badge @relation(fields: [badge_id], references: [id])

  @@id([user_id, badge_id])
}

model Category {
  id          BigInt   @id @default(autoincrement())
  name        String
  summary     String
  description String

  games  Game[]
}

model News {
  id          BigInt   @id @default(autoincrement())
  titre       String
  createdAt   DateTime @default(now())
  description String
  photo       String
  redirection String?
}

model Game {
  id          BigInt   @id @default(autoincrement())
  name        String
  description String
  category_id BigInt
  badge_id    BigInt
  points_reward BigInt

  badge  Badge  @relation(fields: [badge_id], references: [id])
  category Category @relation(fields: [category_id], references: [id])
}
